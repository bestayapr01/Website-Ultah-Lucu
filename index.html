<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Reset & Base Styles */
        * { box-sizing: border-box; }
        body {
            margin: 0; padding: 0;
            background-color: #d11a2a; 
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            height: 100vh; font-family: 'Poppins', sans-serif;
            overflow: hidden;
        }

        /* Tombol Outline Umum (untuk Clue, Lanjut, Kembali) */
        .outline-btn {
            background: transparent; border: 2px solid #ffffff; color: #ffffff;
            padding: 6px 20px; border-radius: 25px; font-size: 0.85rem;
            font-weight: 600; font-family: 'Poppins', sans-serif;
            cursor: pointer; transition: all 0.3s; margin-top: 5px;
        }
        .outline-btn:hover { background: #ffffff; color: #d11a2a; }

        .back-btn { position: absolute; top: 20px; left: 20px; font-size: 0.85rem; padding: 6px 15px; z-index: 50; }
        
        #music-toggle {
            position: fixed; top: 20px; right: 20px;
            background: rgba(255,255,255,0.2); border: 2px solid #fff; color: white;
            width: 40px; height: 40px; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.2rem; cursor: pointer; z-index: 9999;
            transition: all 0.3s;
        }
        #music-toggle:hover { background: #fff; color: #d11a2a; }

        /* ========================================= */
        /* --- LAYAR KUNCI (LOCK SCREEN) --- */
        /* ========================================= */
        #lock-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #d11a2a; z-index: 1000; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.6s ease, transform 0.6s ease;
        }
        #pin-view { display: flex; flex-direction: column; align-items: center; width: 100%; animation: fadeIn 0.4s ease; }
        .lock-gif { width: 75px; margin-bottom: 8px; border-radius: 10px; } 
        .lock-title { color: #ffffff; font-size: 0.85rem; text-align: center; margin-bottom: 15px; font-weight: 700; line-height: 1.4; padding: 0 15px; } 
        .pin-dots { display: flex; gap: 8px; margin-bottom: 20px; } 
        .dot { width: 12px; height: 12px; border-radius: 50%; border: 2px solid #ffffff; background-color: transparent; transition: all 0.2s; } 
        .dot.filled { background-color: #ffffff; }
        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px; } 
        .num-btn {
            width: 50px; height: 50px; border-radius: 10px; background-color: #ffffff; border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            font-size: 1.2rem; font-weight: 700; color: #d11a2a; cursor: pointer; font-family: 'Poppins', sans-serif;
            transition: transform 0.1s, box-shadow 0.1s, background-color 0.2s; display: flex; justify-content: center; align-items: center;
        } 
        .num-btn:active { transform: scale(0.92); box-shadow: 0 2px 5px rgba(0,0,0,0.1); background-color: #f0f0f0; }
        .empty-btn { visibility: hidden; }
        .action-btn { font-size: 1.1rem; }

        #clue-view { display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; color: white; animation: fadeIn 0.4s ease; }
        #clue-view h2 { font-family: 'Great Vibes', cursive; font-size: 3rem; margin: 0 0 10px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        #clue-view p { font-size: 1rem; margin-bottom: 20px; letter-spacing: 1px; }

        /* ========================================= */
        /* --- LAYAR TRANSISI (RUANG TUNGGU) --- */
        /* ========================================= */
        #transition-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #d11a2a; z-index: 999; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.6s ease, transform 0.6s ease; text-align: center; padding: 20px;
        }
        .transition-img { width: 180px; height: 180px; object-fit: cover; border-radius: 50%; border: 5px solid #ffffff; box-shadow: 0 10px 20px rgba(0,0,0,0.2); margin-bottom: 20px; animation: float 3s ease-in-out infinite; }
        .transition-text { color: #ffffff; font-size: 1.1rem; margin-bottom: 25px; font-weight: 600; line-height: 1.6; }

        /* ========================================= */
        /* --- LAYAR PILIHAN (CHOOSE SURPRISE) --- */
        /* ========================================= */
        #choice-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #d11a2a; z-index: 998; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; opacity: 1; transition: opacity 0.5s ease; }
        .choice-title { font-family: 'Great Vibes', cursive; color: white; font-size: 3.5rem; margin-bottom: 30px; text-shadow: 2px 2px 5px rgba(0,0,0,0.3); }
        .choices-container { display: flex; gap: 40px; justify-content: center; align-items: center; }
        .choice-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .choice-glow { width: 130px; height: 130px; border-radius: 50%; background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%); display: flex; justify-content: center; align-items: center; transition: transform 0.3s ease, background 0.3s ease; }
        .choice-item:hover .choice-glow { transform: scale(1.15); background: radial-gradient(circle, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 70%); }
        .choice-label { font-family: 'Great Vibes', cursive; color: white; font-size: 2rem; margin-top: 10px; text-shadow: 1px 1px 3px rgba(0,0,0,0.3); }

        .mini-env { width: 70px; height: 50px; background-color: #c4b89d; position: relative; border-radius: 3px; box-shadow: 0 5px 10px rgba(0,0,0,0.2); }
        .mini-env::before { content: ''; position: absolute; top: 0; left: 0; border-left: 35px solid transparent; border-right: 35px solid transparent; border-top: 25px solid #faf4e1; z-index: 3; }
        .mini-env::after { content: ''; position: absolute; bottom: 0; left: 0; border-left: 35px solid transparent; border-right: 35px solid transparent; border-bottom: 30px solid #e0dac4; z-index: 2; }
        .mini-seal { position: absolute; top: 25px; left: 50%; transform: translate(-50%, -50%); width: 12px; height: 12px; background-color: #b31217; border-radius: 50%; z-index: 4; }
        .flower-icon { font-size: 3.5rem; text-shadow: 0 5px 10px rgba(0,0,0,0.2); }

        /* ========================================= */
        /* --- WADAH LAYAR AMPLOP & BUNGA --- */
        /* ========================================= */
        #envelope-screen, #flower-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; flex-direction: column; align-items: center; justify-content: center; background-color: #d11a2a; z-index: 997; animation: fadeIn 0.6s ease; }

        /* --- KODE AMPLOP ASLI --- */
        h1 { font-family: 'Great Vibes', cursive; color: white; font-size: 3.5rem; margin-bottom: 2rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); letter-spacing: 2px; }
        .container { perspective: 1200px; }
        .envelope-wrapper { position: relative; width: 350px; height: 230px; cursor: pointer; animation: sway 3s ease-in-out infinite; }
        .envelope-wrapper.open { animation: none; }
        .envelope-back { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #c4b89d; border-radius: 5px; box-shadow: 0 15px 30px rgba(0,0,0,0.3); z-index: 1; }
        .card { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); width: 310px; height: 210px; background-color: #fff; border-radius: 8px; box-shadow: 0 0 15px rgba(0,0,0,0.1); z-index: 2; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 25px; transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: pointer; }
        .envelope-wrapper.open .card:hover { transform: translate(-50%, -145px) scale(1.02); box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        .decorations { position: absolute; width: 100%; height: 100%; pointer-events: none; top: 0; left: 0; }
        .deco-item { position: absolute; font-size: 2rem; }
        .deco-1 { top: -15px; left: -10px; transform: rotate(-15deg); }
        .deco-2 { top: 10px; right: -10px; transform: rotate(15deg); }
        .card h2 { font-family: 'Great Vibes', cursive; color: #d11a2a; font-size: 2.8rem; margin: 0 0 5px 0; }
        .card p { color: #444; font-size: 0.95rem; line-height: 1.4; margin: 0; }
        .click-hint { color: #999 !important; font-size: 0.75rem !important; margin-top: 10px !important; font-style: italic; animation: pulse 1.5s infinite; }
        
        .envelope-front-left { position: absolute; top: 0; left: 0; width: 0; height: 0; border-top: 115px solid transparent; border-bottom: 115px solid transparent; border-left: 175px solid #f0ead6; z-index: 3; pointer-events: none; }
        .envelope-front-right { position: absolute; top: 0; right: 0; width: 0; height: 0; border-top: 115px solid transparent; border-bottom: 115px solid transparent; border-right: 175px solid #e8e2cd; z-index: 3; pointer-events: none; }
        .envelope-bottom { position: absolute; bottom: 0; left: 0; width: 0; height: 0; border-left: 175px solid transparent; border-right: 175px solid transparent; border-bottom: 130px solid #e0dac4; z-index: 3; pointer-events: none; }
        .envelope-top { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 4; transform-origin: top; transition: transform 0.5s ease-in-out 0.4s, z-index 0s 0.4s; pointer-events: none; }
        .envelope-top::before { content: ''; position: absolute; top: 0; left: 0; border-left: 175px solid transparent; border-right: 175px solid transparent; border-top: 125px solid #faf4e1; }
        .seal { position: absolute; top: 100px; left: 50%; transform: translateX(-50%); width: 45px; height: 45px; background-color: #b31217; border-radius: 50%; box-shadow: inset 0 0 10px rgba(0,0,0,0.3), 0 4px 5px rgba(0,0,0,0.2); z-index: 5; transition: box-shadow 0.3s; }
        
        .envelope-wrapper.open .envelope-top { transform: rotateX(180deg); z-index: 1; transition: transform 0.5s ease-in-out, z-index 0s 0.2s; }
        .envelope-wrapper.open .seal { box-shadow: none; }
        .envelope-wrapper.open .card { transform: translate(-50%, -140px); transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.5s; }

        /* --- MODAL SURAT BESAR & 5 FOTO --- */
        .letter-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: transparent; z-index: 2000; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.4s ease; }
        .letter-modal.active { opacity: 1; pointer-events: all; }
        .letter-content { background: #fff; width: 90%; max-width: 600px; max-height: 85vh; border-radius: 10px; padding: 40px; position: relative; transform: scale(0.7) translateY(100px); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); overflow-y: auto; box-shadow: 0 20px 50px rgba(0,0,0,0.3); text-align: center; z-index: 2002; }
        .letter-modal.active .letter-content { transform: scale(1) translateY(0); }
        .close-btn { position: absolute; top: 15px; right: 20px; font-size: 2rem; color: #ccc; cursor: pointer; line-height: 1; transition: color 0.3s; }
        .close-btn:hover { color: #d11a2a; }
        .letter-content h2 { font-family: 'Great Vibes', cursive; color: #d11a2a; font-size: 3.5rem; margin-top: 0; margin-bottom: 20px; }
        .letter-content p { color: #333; font-size: 1.1rem; line-height: 1.8; text-align: justify; margin-bottom: 20px; }

        /* Gaya untuk 5 Foto Melayang */
        .floating-photo { position: absolute; opacity: 0; z-index: 2001; transition: opacity 0.6s ease 0.3s, transform 0.6s ease 0.3s; }
        .letter-modal.active .floating-photo { opacity: 1; }
        .photo-1 { top: 10%; left: 5%; width: 250px; transform: rotate(-15deg) scale(0.8); }
        .letter-modal.active .photo-1 { transform: rotate(-15deg) scale(1); }
        .photo-2 { bottom: 5%; right: 5%; width: 280px; transform: rotate(10deg) scale(0.8); }
        .letter-modal.active .photo-2 { transform: rotate(10deg) scale(1); }
        .photo-3 { bottom: 1%; left: 8%; width: 330px; transform: rotate(-8deg) scale(0.8); }
        .letter-modal.active .photo-3 { transform: rotate(-8deg) scale(1); }
        .photo-4 { top: 15%; right: 8%; width: 230px; transform: rotate(12deg) scale(0.8); }
        .letter-modal.active .photo-4 { transform: rotate(12deg) scale(1); }
        .photo-5 { top: 45%; left: 2%; width: 170px; transform: rotate(-5deg) scale(0.8); }
        .letter-modal.active .photo-5 { transform: rotate(-5deg) scale(1); }

        /* KEYFRAMES ANIMASI */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        @keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-8px, 0, 0); } 40%, 60% { transform: translate3d(8px, 0, 0); } }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        @keyframes sway { 0%, 100% { transform: rotate(-1.5deg) translateY(0); } 50% { transform: rotate(1.5deg) translateY(-5px); } }

        /* RESPONSIVE DI HP - 5 FOTO TETAP MUNCUL */
        @media (max-width: 768px) { 
            .photo-1 { width: 90px; top: 3%; left: 2%; } 
            .photo-2 { width: 95px; bottom: 3%; right: 2%; } 
            .photo-3 { width: 85px; bottom: 5%; left: 2%; } 
            .photo-4 { width: 90px; top: 5%; right: 2%; } 
            .photo-5 { width: 80px; top: 45%; left: 1%; } 
            .choice-title { font-size: 3rem; } .choices-container { gap: 20px; } .choice-glow { width: 110px; height: 110px; }
        }
        @media (max-width: 360px) {
            .num-btn { width: 45px; height: 45px; font-size: 1.1rem; } .numpad { gap: 8px; } .lock-title { font-size: 0.75rem; }
            .transition-img { width: 150px; height: 150px; } .transition-text { font-size: 0.95rem; }
        }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="Kanyaah_musicaldown.com_1771512503.mp3" type="audio/mpeg">
    </audio>

    <button id="music-toggle">üéµ</button>

    <div id="lock-screen">
        <div id="pin-view">
            <img src="Harry Potter Magic GIF by BEARISH.gif" alt="Cute Cat" class="lock-gif">
            <h2 class="lock-title">Hi love, ayo tebak passwordnya,<br>I bet u knoww!!</h2>
            
            <div class="pin-dots" id="pin-dots">
                <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
            </div>

            <div class="numpad">
                <button class="num-btn" onclick="addPin('1')">1</button>
                <button class="num-btn" onclick="addPin('2')">2</button>
                <button class="num-btn" onclick="addPin('3')">3</button>
                <button class="num-btn" onclick="addPin('4')">4</button>
                <button class="num-btn" onclick="addPin('5')">5</button>
                <button class="num-btn" onclick="addPin('6')">6</button>
                <button class="num-btn" onclick="addPin('7')">7</button>
                <button class="num-btn" onclick="addPin('8')">8</button>
                <button class="num-btn" onclick="addPin('9')">9</button>
                <div class="empty-btn"></div>
                <button class="num-btn" onclick="addPin('0')">0</button>
                <button class="num-btn action-btn" onclick="deletePin()">‚å´</button>
            </div>
            <button class="outline-btn" id="btn-show-clue">Clue</button>
        </div>

        <div id="clue-view">
            <h2>Clue</h2>
            <p>Your Birthday!</p>
            <button class="outline-btn" id="btn-hide-clue">Kembali</button>
        </div>
    </div>

    <div id="transition-screen">
        <img src="Celebrate Happy Birthday GIF by BEARISH.gif" alt="Foto Transisi" class="transition-img">
        <h2 class="transition-text">
            Selamat Ulang Tahun üéâ<br>
            Ini Kuenyaa Coba Tiup Online <br>
            Kalo udah Lanjut..
        </h2>
        <button class="outline-btn" id="btn-continue">Lanjut</button>
    </div>

    <div id="choice-screen">
        <h2 class="choice-title">Choose the Surprise</h2>
        
        <div class="choices-container">
            <div class="choice-item" id="choose-envelope">
                <div class="choice-glow">
                    <div class="mini-env"><div class="mini-seal"></div></div>
                </div>
                <div class="choice-label">Envelope</div>
            </div>

            <div class="choice-item" id="choose-flower">
                <div class="choice-glow">
                    <div class="flower-icon">üíê</div>
                </div>
                <div class="choice-label">Flower</div>
            </div>
        </div>
    </div>

    <div id="envelope-screen">
        <button class="outline-btn back-btn" onclick="backToChoice('envelope-screen')">üîô Pilihan</button>
        
        <h1>Press the Envelope</h1>
        <div class="container">
            <div class="envelope-wrapper" id="envelope">
                <div class="envelope-back"></div>
                <div class="card" id="small-card">
                    <div class="decorations">
                        <div class="deco-item deco-1">ü¶ã</div>
                        <div class="deco-item deco-2">üå∏</div>
                    </div>
                    <h2>Happy Birthday</h2>
                    <p>Selamat ulang tahun Bebe Semoga yang kamu semogakan cepat tersemogakan. ‚ú®</p>
                    <p class="click-hint">(Klik surat ini untuk membaca)</p>
                </div>
                <div class="envelope-front-left"></div>
                <div class="envelope-front-right"></div>
                <div class="envelope-bottom"></div>
                <div class="envelope-top"><div class="seal"></div></div>
            </div>
        </div>
    </div>

    <div id="flower-screen">
        <button class="outline-btn back-btn" onclick="backToChoice('flower-screen')">üîô Pilihan</button>
        
        <h1>For You</h1>
        <div style="text-align: center;">
            <video id="flower-video" src="lv_0_20260219234428.mp4" loop playsinline controls style="width: 250px; border-radius: 15px; border: 5px solid white; box-shadow: 0 10px 20px rgba(0,0,0,0.3);"></video>
            <p style="color: white; font-family: 'Poppins', sans-serif; margin-top: 20px; font-size: 1.1rem;">
                Buket buat kesayangankuüå∏
            </p>
        </div>
    </div>

    <div class="letter-modal" id="letter-modal">
        <img src="Desain tanpa judul (26).png" class="floating-photo photo-1">
        <img src="Desain tanpa judul (25).png" class="floating-photo photo-2">
        <img src="1.png" class="floating-photo photo-3">
        <img src="Desain tanpa judul (28).png" class="floating-photo photo-4">
        <img src="Desain tanpa judul (29).png" class="floating-photo photo-5">
        
        <div class="letter-content">
            <span class="close-btn" id="close-btn">&times;</span>
            <h2>Happy Birthday!</h2>
            <p>Selamat ulang tahun Bebee üéâ</p>
            <p>Padahal baru kemarin kamu masih kecik sekarang udah nambah aja umur nyaa huhuhuu (walaupun masih sama lemineral mini si). Keren banget kamu sayanggg bisa sampe dititik ini
                kamu ngelewatin itu semua dan thank you for sticking it out, whether for me or for yourself. I'm so proud of you Bebeeü§ç</p>
            <p>Yang lalu biarlah berlalu kamu masih punya perjalanan baru sayangg. Semoga di umur kamu sekarang dan mulai dari ini semakin banyak hal hal baik yang dateng ke kamu,
               kehidupan yang baik, dan apapun itu yang kamu harapin semoga kecapai semua ya bebee aminnnn seriusss</p>
            <p>Jan pernah lelah buat ngejar mimpi kamu. Aku selalu ada di sini mendukungmu sayangggkuuu
              cintakuuuu duniakuu semestaa sealam jagad raya yang paling lucu imup dan menggemaskannnn.</p>
            <p>I Love You Moree ü§ç</p>
            <p><em><br>Your Bebee</em></p>
        </div>
    </div>

    <script>
        // --- LOGIKA MUSIK & VIDEO ---
        const bgMusic = document.getElementById('bg-music');
        const musicToggle = document.getElementById('music-toggle');
        const flowerVideo = document.getElementById('flower-video'); // Mengambil data video
        let isMusicPlaying = false;

        // Memulai MP3
        function startMusic() {
            if (!isMusicPlaying) {
                bgMusic.play().then(() => {
                    isMusicPlaying = true;
                    musicToggle.innerText = "üîä";
                }).catch(e => console.log("Audio perlu interaksi pengguna."));
                document.removeEventListener('click', startMusic);
            }
        }
        document.addEventListener('click', startMusic);

        // Tombol Toggle Musik
        musicToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            if (bgMusic.paused) {
                bgMusic.play();
                musicToggle.innerText = "üîä";
                isMusicPlaying = true;
            } else {
                bgMusic.pause();
                musicToggle.innerText = "üîá";
                isMusicPlaying = false;
            }
        });

        // KETIKA VIDEO DIPUTAR -> MATIKAN MP3
        flowerVideo.addEventListener('play', () => {
            bgMusic.pause();
            musicToggle.innerText = "üîá";
            isMusicPlaying = false;
        });

        // KETIKA VIDEO DI-PAUSE -> NYALAKAN LAGI MP3
        flowerVideo.addEventListener('pause', () => {
            bgMusic.play();
            musicToggle.innerText = "üîä";
            isMusicPlaying = true;
        });

        // --- LOGIKA LOCK SCREEN & CLUE ---
        let currentPin = "";
        const targetPin = "20204"; 
        const maxPinLength = targetPin.length;
        
        const dots = document.querySelectorAll('.dot');
        const lockScreen = document.getElementById('lock-screen');
        const transitionScreen = document.getElementById('transition-screen');
        const choiceScreen = document.getElementById('choice-screen');
        const envelopeScreen = document.getElementById('envelope-screen');
        const flowerScreen = document.getElementById('flower-screen');
        
        const pinDotsContainer = document.getElementById('pin-dots');
        const pinView = document.getElementById('pin-view');
        const clueView = document.getElementById('clue-view');
        const btnShowClue = document.getElementById('btn-show-clue');
        const btnHideClue = document.getElementById('btn-hide-clue');
        const btnContinue = document.getElementById('btn-continue');

        btnShowClue.addEventListener('click', () => { pinView.style.display = 'none'; clueView.style.display = 'flex'; });
        btnHideClue.addEventListener('click', () => { clueView.style.display = 'none'; pinView.style.display = 'flex'; });

        function updateDots() {
            dots.forEach((dot, index) => {
                if (index < currentPin.length) dot.classList.add('filled');
                else dot.classList.remove('filled');
            });
        }

        function addPin(num) {
            if (currentPin.length < maxPinLength) {
                currentPin += num; updateDots();
                if (currentPin.length === maxPinLength) setTimeout(checkPin, 200);
            }
        }

        function deletePin() {
            if (currentPin.length > 0) { currentPin = currentPin.slice(0, -1); updateDots(); }
        }

        function checkPin() {
            if (currentPin === targetPin) {
                lockScreen.style.transform = "translateY(-100%)";
                lockScreen.style.opacity = "0";
                setTimeout(() => { lockScreen.style.display = "none"; }, 600);
            } else {
                pinDotsContainer.classList.add('shake');
                setTimeout(() => { pinDotsContainer.classList.remove('shake'); currentPin = ""; updateDots(); }, 400); 
            }
        }

        btnContinue.addEventListener('click', () => {
            transitionScreen.style.transform = "translateY(-100%)";
            transitionScreen.style.opacity = "0";
            setTimeout(() => { transitionScreen.style.display = "none"; }, 600);
        });

        document.getElementById('choose-envelope').addEventListener('click', () => {
            choiceScreen.style.display = "none"; envelopeScreen.style.display = "flex";
        });

        document.getElementById('choose-flower').addEventListener('click', () => {
            choiceScreen.style.display = "none"; 
            flowerScreen.style.display = "flex";
            flowerVideo.play(); // Putar video otomatis saat menu bunga dibuka
        });

        function backToChoice(screenId) {
            document.getElementById(screenId).style.display = "none";
            choiceScreen.style.display = "flex";
            
            if(screenId === 'envelope-screen') {
                document.getElementById('envelope').classList.remove('open');
            }
            if(screenId === 'flower-screen') {
                flowerVideo.pause(); // Matikan video secara otomatis saat keluar (akan menyalakan mp3 lagi)
            }
        }

        const envelope = document.getElementById('envelope');
        const letterModal = document.getElementById('letter-modal');
        const closeBtn = document.getElementById('close-btn');

        envelope.addEventListener('click', (event) => {
            if (!envelope.classList.contains('open')) {
                envelope.classList.add('open');
            } else {
                if (event.target.closest('#small-card')) {
                    letterModal.classList.add('active');
                } else {
                    envelope.classList.remove('open');
                }
            }
        });

        closeBtn.addEventListener('click', () => { letterModal.classList.remove('active'); });
        letterModal.addEventListener('click', (event) => {
            if (event.target === letterModal) letterModal.classList.remove('active');
        });
    </script>
</body>
</html>